<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Architectural Portfolio 3D</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
    <style>
        body { margin: 0; padding: 0; background: #ffffff; font-family: 'Segoe UI', sans-serif; }
        model-viewer { width: 100vw; height: 100vh; --poster-color: transparent; background-color: #f4f4f7; }
        
        #menu {
            position: absolute; top: 20px; left: 20px;
            background: white; padding: 15px; border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1); z-index: 10; width: 220px;
        }
        h3 { margin: 0 0 10px 0; font-size: 14px; color: #888; text-transform: uppercase; }
        button {
            width: 100%; padding: 10px; margin-bottom: 5px;
            border: 1px solid #eee; border-radius: 6px;
            background: #fff; cursor: pointer; transition: 0.2s;
            font-size: 13px; text-align: left;
        }
        button:hover { background: #f0f0f0; }
        button.active { background: #000; color: #fff; border-color: #000; }
        
        .controls-info { font-size: 11px; color: #999; margin-top: 10px; }
    </style>
</head>
<body>

<div id="menu">
    <h3>Styles de Vue</h3>
    <button id="btnMono" class="active" onclick="setStyle('mono')">‚ö™ Maquette Blanche</button>
    <button id="btnReal" onclick="setStyle('real')">üé® Rendu R√©aliste</button>
    <button id="btnWire" onclick="setStyle('wire')">üï∏Ô∏è Mode Structure</button>

    <h3 style="margin-top:15px">Coupe</h3>
    <button onclick="toggleSection()">‚úÇÔ∏è Activer/D√©sactiver Coupe</button>
    
    <div class="controls-info">
        <b>Rotation :</b> Un doigt / Clic gauche<br>
        <b>Zoom :</b> Pincer / Molette
    </div>
</div>

<model-viewer id="viewer" 
    src="projet1.glb" 
    camera-controls 
    shadow-intensity="2" 
    shadow-softness="1"
    exposure="1.2"
    environment-image="neutral"
    auto-rotate>
</model-viewer>

<script>
    const viewer = document.querySelector("#viewer");

    window.setStyle = (mode) => {
        // Reset boutons
        document.querySelectorAll('button').forEach(b => b.classList.remove('active'));
        
        if (mode === 'mono') {
            document.getElementById('btnMono').classList.add('active');
            // Technique pour le mode maquette blanche
            viewer.innerHTML = `<div slot="poster"></div>`;
            viewer.style.filter = "saturate(0) brightness(1.2) contrast(1.1)";
        } 
        else if (mode === 'real') {
            document.getElementById('btnReal').classList.add('active');
            viewer.style.filter = "none";
        } 
        else if (mode === 'wire') {
            document.getElementById('btnWire').classList.add('active');
            viewer.style.filter = "invert(1) grayscale(1) opacity(0.5)";
        }
    };

    // Syst√®me de coupe simplifi√© (Clipping)
    let isClipped = false;
    window.toggleSection = () => {
        isClipped = !isClipped;
        if (isClipped) {
            // On utilise le clip-path CSS qui est ultra fluide pour simuler une coupe
            viewer.style.clipPath = "polygon(0 0, 100% 0, 100% 50%, 0 50%)";
        } else {
            viewer.style.clipPath = "none";
        }
    };

    // Initialisation
    window.onload = () => setStyle('mono');
</script>

</body>
</html>
